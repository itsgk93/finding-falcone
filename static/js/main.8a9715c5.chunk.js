(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,n){e.exports=n(35)},25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(11),s=n.n(c),l=(n(25),n(1)),i=n(2),o=n(4),u=n(3),p=n(5),d=(n(26),n(27),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).changeHandler=function(e){var t=parseInt(e.target.value);n.props.updateVehicle(t),n.setState({selected_vehicle:t})},n.state={selected_vehicle:-1},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.vehicles?this.props.vehicles.map(function(t,n){var a="vehicle"+e.props.id,c=""+n,s="radio left",l=!1;return(0==t.total_no||e.props.distance>t.max_distance)&&e.state.selected_vehicle!=n&&(s+=" disabled",l=!0),r.a.createElement("div",{key:n,className:s},r.a.createElement("label",{htmlFor:t.name},r.a.createElement("input",{type:"radio",name:a,value:c,onChange:e.changeHandler,disabled:l}),t.name," (",t.total_no,")"),r.a.createElement("br",null))}):null;return r.a.createElement("div",null,t)}}]),t}(a.Component)),h=(n(28),n(7)),m="PENDING",f="ERROR",v="FULFILLED",b="SEARCHING",y="SEARCHED",E="UPDATE_TIME",j="ADD_QUANTITY",O="SUB_QUANTITY",g="https://findfalcone.herokuapp.com/vehicles",k="https://findfalcone.herokuapp.com/planets",N="https://findfalcone.herokuapp.com/token",_="https://findfalcone.herokuapp.com/find",S={Accept:"application/json","Content-Type":"application/json"};function w(e){return{type:f,payload:{status:"error",error:e}}}function C(){return function(e){e({type:m,payload:{status:"Loading"}});var t={vehicles:[],planets:[],time:0,status:"fulfilled",error:""};fetch(g).then(function(e){return e.json()}).then(function(e){return t.vehicles=x(e,0),fetch(k)}).then(function(e){return e.json()}).then(function(n){t.planets=x(n,!1),e(function(e){return{type:v,payload:e}}(t))}).catch(function(t){e(w(t))})}}function T(e,t,n){return function(a){a({type:b,payload:{status:"Searching"}}),fetch(e,{method:"POST",headers:S,body:""}).then(function(e){return e.json()}).then(function(e){n.token=e.token;var a=JSON.stringify(n);return fetch(t,{method:"POST",headers:S,body:a})}).then(function(e){return e.json()}).then(function(e){var t;a((void 0==(t=e).status&&(t.status="error"),{type:y,payload:t}))}).catch(function(e){console.log(e),a(w(e))})}}function x(e,t){return e.forEach(function(e){e.selected=t}),e}var F=4,I=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).updateVehicle=function(e){var t=-1!==e?n.state.distance/n.props.vehicles[e].speed:0,a=n.state.selected_vehicle;-1!==a&&(n.props.addQuantity(a,"vehicle"),n.props.updateTime(-n.state.time)),-1!==e&&(n.props.subQuantity(e,"vehicle"),n.props.updateTime(t)),n.setState({selected_vehicle:e,time:t})},n.changeHandler=function(e){var t=parseInt(e.target.value),a=-1!==t?n.props.planets[t].distance:0,r=n.state.selected_planet;-1!==r&&n.props.addQuantity(r,"planet"),-1!==t&&n.props.subQuantity(t,"planet"),n.props.addQuantity(n.state.selected_vehicle,"vehicle"),n.props.updateTime(-n.state.time),n.setState(function(e){return{id:e.id+F,selected_vehicle:-1,time:0,selected_planet:t,distance:a}})},n.state={id:0,distance:0,time:0,selected_planet:-1,selected_vehicle:-1},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){this.setState({id:this.props.id})}},{key:"render",value:function(){var e=this,t=this.props.planets?this.props.planets.map(function(t,n){var a=""+n;if(!t.selected||e.state.selected_planet==a)return r.a.createElement("option",{key:a,value:a},t.name," ")}):null;return r.a.createElement("div",null,r.a.createElement("select",{onChange:this.changeHandler,value:""+this.state.selected_planet},r.a.createElement("option",{value:"-1"},"Select"),t),-1!==this.state.selected_planet?r.a.createElement(d,{id:this.state.id,key:this.state.id,vehicles:this.props.vehicles,updateVehicle:this.updateVehicle,distance:this.state.distance}):null)}}]),t}(a.Component),L=Object(h.b)(function(e,t){return{vehicles:e.vehicles,planets:e.planets,id:t.id}},function(e){return{addQuantity:function(t,n){e(function(e,t){return{type:j,payload:{type:t,index:e}}}(t,n))},subQuantity:function(t,n){e(function(e,t){return{type:O,payload:{type:t,index:e}}}(t,n))},updateTime:function(t){e(function(e){return{type:E,payload:{time:e}}}(t))}}})(I),P=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).findFalcone=function(){var e=[],t=[];n.props.store.planets.forEach(function(t){t.selected&&e.push(t.name)}),n.props.store.vehicles.forEach(function(e){if(e.selected>0)for(var n=e.selected;n>0;)t.push(e.name),n--});var a={token:"",planet_names:e,vehicle_names:t};n.props.findfalcone(N,_,a)},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"planetsSelected",value:function(){var e=0;return this.props.store.vehicles.forEach(function(t){e+=t.selected}),4==e}},{key:"render",value:function(){for(var e=[],t=1;t<=4;t++){var n=t;e.push(r.a.createElement("div",{className:"w-20",key:n},r.a.createElement("b",{className:"text_bold"},"Destination ",t),r.a.createElement(L,{id:n})))}return r.a.createElement("div",{className:"container"},r.a.createElement("center",null,r.a.createElement("h3",{className:"py-5"},"Select planets you want to search in")),r.a.createElement("div",{className:"row"},e,r.a.createElement("div",{className:"w-20"},r.a.createElement("b",{className:"text_bold stick_right"},"Time taken : ",this.props.store.time),r.a.createElement("br",null))),r.a.createElement("center",{className:"my-5"},r.a.createElement("button",{className:"btn badge badge-secondary",onClick:this.findFalcone,disabled:!this.planetsSelected()},"Find Falcone"),r.a.createElement("br",null)))}}]),t}(a.Component),Q=Object(h.b)(function(e){return{store:e}},function(e){return{findfalcone:function(t,n,a){e(T(t,n,a))}}})(P),A=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.store,t=e.status,n=e.time,a="success"===t?r.a.createElement("p",null,"Planet found : ",this.props.store.planet_name):null;return r.a.createElement("div",null,r.a.createElement("center",null,r.a.createElement("p",null,"success"==t?"Success ! Congratulation on Finding Falcone. King Shan is mighty pleased.":"Oops ! Better Luck Next Time"),r.a.createElement("br",null),r.a.createElement("p",null,"Time taken : ",n),"success"===t?a:null,r.a.createElement("br",null),r.a.createElement("p",null,r.a.createElement("button",{className:"btn badge badge-secondary ",onClick:this.props.reset},"Start Again"),r.a.createElement("br",null))))}}]),t}(a.Component),D=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("center",null,r.a.createElement("h1",null,"Error !!  "),r.a.createElement("p",null,this.props.message)))}}]),t}(a.Component),H=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("center",null,r.a.createElement("h3",null,this.props.message,"...")))}}]),t}(a.Component),R=(n(33),function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-secondary"},r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarText"}),r.a.createElement("a",{className:"nav-link navbar-brand",href:"#",onClick:this.props.reset}," ","Reset ",r.a.createElement("span",{className:"sr-only"},"(current)")),r.a.createElement("a",{className:"navbar-brand",href:"https://www.geektrust.in"},"GeekTrust"," "))}}]),t}(a.Component)),U=(n(34),function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"col-sm-12 last"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"col-sm-12 footer"},r.a.createElement("span",null," Coding Problem  - www.geektrust.in/finding-falcone ")))))}}]),t}(a.Component)),B=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).reset=function(){n.props.reset(),n.setState(function(e){return{id:e.id+1}})},n.isProblemSolved=function(){return"success"==n.props.store.status||"false"==n.props.store.status},n.isLoading=function(){var e=n.props.store.status;return"Loading"==e||"Searching"==e},n.isError=function(){return console.log(n.props.store.error),n.props.store.error.trim().length>0},n.state={id:1},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){this.props.reset()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(R,{reset:this.reset}),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("center",null,r.a.createElement("h1",{className:"my-3"},"Finding Falcone!")),this.isLoading()?r.a.createElement(H,{message:this.props.store.status}):null,this.isProblemSolved()?r.a.createElement(A,{reset:this.reset,store:this.props.store}):null,this.isError()?r.a.createElement(D,{message:this.props.store.error}):null,this.isProblemSolved()||this.isError()||this.isLoading()?null:r.a.createElement(Q,{key:this.state.id})),r.a.createElement(U,null))}}]),t}(a.Component),V=Object(h.b)(function(e){return{store:e}},function(e){return{reset:function(){e(C())}}})(B);var W=function(){return r.a.createElement(V,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var G=n(10),J=n(19),M=n(15),Y=n(8),K={vehicles:[],planets:[],time:0,status:"",error:""};function $(e,t,n){var a=n.vehicles[e].total_no,r=a+t>=0?a+t:a,c=Object(M.a)(n.vehicles);return c[e].total_no=r,c[e].selected=c[e].selected-(r-a),Object(Y.a)({},n,{vehicles:c})}function q(e,t,n){var a=Object(M.a)(n.planets);return a[e].selected=t,Object(Y.a)({},n,{planets:a})}var z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;if(t.type===j){if(t.payload.index<0)return Object(Y.a)({},e);if("vehicle"===t.payload.type)return $(t.payload.index,1,e);if("planet"===t.payload.type)return q(t.payload.index,!1,e)}if(t.type===O){if(t.payload.index<0)return Object(Y.a)({},e);if("vehicle"===t.payload.type)return $(t.payload.index,-1,e);if("planet"===t.payload.type)return q(t.payload.index,!0,e)}if(t.type===E){var n=e.time+t.payload.time;return Object(Y.a)({},e,{time:n})}return t.type===m||t.type===f||t.type===v||t.type===b||t.type===y?Object(Y.a)({},e,t.payload):Object(Y.a)({},e)},X=[J.a],Z=Object(G.c)(z,G.a.apply(void 0,X));s.a.render(r.a.createElement(h.a,{store:Z},r.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[20,1,2]]]);
//# sourceMappingURL=main.8a9715c5.chunk.js.map